<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å†…æ¨å®‡å®™ - Ultimate Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* --- åŸºç¡€è®¾ç½® --- */
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #020205; font-family: 'Inter', sans-serif; }

        /* æ»šåŠ¨æ¡æ ·å¼ç¾åŒ– */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: rgba(255,255,255,0.05); }
        ::-webkit-scrollbar-thumb { background: #38bdf8; border-radius: 3px; }

        /* --- 3D å®¹å™¨ --- */
        #canvas-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
        /* äº¤äº’æ‰‹å‹é€»è¾‘ */
        #canvas-container.interactive { cursor: pointer; }
        
        /* --- V1 é£æ ¼éœ¸æ°” UI (å›å½’) --- */
        #ui-layer {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            text-align: center; color: white; z-index: 10; pointer-events: none;
            transition: opacity 0.5s ease;
        }
        
        /* æ ¸å¿ƒï¼šå›å½’ V1 çš„å‘å…‰å¤§å­— */
        .v1-title {
            font-family: 'Arial Black', 'Helvetica Neue', sans-serif;
            font-size: 5rem; /* å·¨å¤§ */
            letter-spacing: 0.8rem;
            color: #fff;
            text-shadow: 0 0 20px rgba(0, 240, 255, 0.8), 0 0 40px rgba(0, 240, 255, 0.4);
            text-transform: uppercase;
            margin-bottom: 1rem;
            white-space: nowrap;
            opacity: 0; /* åˆå§‹éšè—ï¼Œç­‰å¾…å¼€åœºåŠ¨ç”» */
        }
        .v1-subtitle {
            font-size: 1.2rem; color: #ccc; letter-spacing: 0.4rem; font-weight: 300;
            text-shadow: 0 0 10px rgba(255,255,255,0.3);
            opacity: 0; /* åˆå§‹éšè—ï¼Œç­‰å¾…å¼€åœºåŠ¨ç”» */
        }

        /* åº•éƒ¨æç¤ºå‘¼å¸ç¯ */
        .instruction-hint {
            position: absolute; bottom: 10%; left: 50%; transform: translateX(-50%);
            color: rgba(0, 240, 255, 0.8); font-size: 0.9rem; pointer-events: none; z-index: 10;
            letter-spacing: 2px; border: 1px solid rgba(0, 240, 255, 0.3);
            padding: 10px 20px; border-radius: 30px; background: rgba(0,0,0,0.5);
            animation: pulse 2s infinite;
            opacity: 0; /* åˆå§‹éšè—ï¼Œç­‰å¾…å¼€åœºåŠ¨ç”» */
        }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(0, 240, 255, 0.4); } 70% { box-shadow: 0 0 0 10px rgba(0, 240, 255, 0); } 100% { box-shadow: 0 0 0 0 rgba(0, 240, 255, 0); } }

        /* --- é«˜çº§è½¬åœºç‰¹æ•ˆå±‚ --- */
        
        /* 1. é€Ÿåº¦çº¿ (Speed Lines) */
        #speed-lines {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 15;
            background: radial-gradient(circle, transparent 40%, rgba(255, 255, 255, 0.1) 45%, transparent 50%);
            background-size: 200% 200%;
            opacity: 0; pointer-events: none;
            transform: scale(1);
        }

        /* 2. å¤§æ°”è¿·é›¾ (Cloud Fog) - æ›¿ä»£ç®€å•çš„ç™½å± */
        #cloud-fog {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 20;
            /* ä½¿ç”¨ backdrop-filter åˆ¶é€ çœŸå®çš„æ¨¡ç³Šæ„Ÿ */
            backdrop-filter: blur(0px); 
            background: radial-gradient(circle, rgba(220, 240, 255, 0.8) 0%, rgba(255, 255, 255, 0.4) 60%, rgba(255, 255, 255, 0) 100%);
            opacity: 0; pointer-events: none;
            transform: scale(0.8);
        }

        /* --- 2D ç•Œé¢ (ä¿æŒä¸å˜) --- */
        #map-interface, #list-interface {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 5;
            display: none;
            background: radial-gradient(circle at 50% 30%, #1e293b 0%, #0b1026 100%);
        }
        #list-interface { z-index: 6; background: #0b1026; background-image: linear-gradient(rgba(56, 189, 248, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(56, 189, 248, 0.03) 1px, transparent 1px); background-size: 40px 40px; }

        /* ç»„ä»¶æ ·å¼ */
        .glass-header { background: rgba(11, 16, 38, 0.9); backdrop-filter: blur(12px); border-bottom: 1px solid rgba(255,255,255,0.1); }
        .search-input {
            background: rgba(255,255,255,0.08);
            border: 1px solid rgba(255,255,255,0.1);
            color: white; transition: all 0.3s;
        }
        .search-input:focus {
            background: rgba(255,255,255,0.15); border-color: #38bdf8; outline: none;
            box-shadow: 0 0 15px rgba(56, 189, 248, 0.2);
        }
        .search-input::placeholder { color: rgba(255,255,255,0.4); }
        .job-card { background: rgba(30, 41, 59, 0.6); border: 1px solid rgba(56, 189, 248, 0.2); backdrop-filter: blur(10px); transition: all 0.3s; }
        .job-card:hover { transform: translateY(-5px); border-color: #38bdf8; background: rgba(30, 41, 59, 0.8); box-shadow: 0 10px 30px -10px rgba(56, 189, 248, 0.3); }

        /* --- ä¼ä¸šå¡ç‰‡æ ·å¼ (åˆ—è¡¨é¡µ) --- */
        .company-card {
            background: rgba(30, 41, 59, 0.6);
            border: 1px solid rgba(56, 189, 248, 0.2);
            backdrop-filter: blur(10px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            cursor: pointer;
        }
        .company-card:hover {
            transform: translateY(-5px);
            border-color: #38bdf8;
            background: rgba(30, 41, 59, 0.8);
            box-shadow: 0 0 30px rgba(56, 189, 248, 0.15);
        }

        /* --- ä¼ä¸šè¯¦æƒ…é¡µæ ·å¼ --- */
        .segment-card {
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 8px;
            padding: 20px;
        }
        .segment-title {
            color: #fff;
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        .segment-title::before {
            content: '';
            display: block;
            width: 4px;
            height: 16px;
            background: #38bdf8;
            margin-right: 10px;
            box-shadow: 0 0 10px #38bdf8;
        }
        .job-tag {
            display: inline-block;
            padding: 6px 12px;
            margin: 0 8px 8px 0;
            background: rgba(56, 189, 248, 0.05);
            color: #94a3b8;
            border: 1px solid rgba(56, 189, 248, 0.1);
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        .job-tag:hover {
            background: #38bdf8;
            color: #000;
            border-color: #38bdf8;
            box-shadow: 0 0 15px rgba(56, 189, 248, 0.5);
        }
        .gallery-img {
            width: 100%;
            height: 100px;
            object-fit: cover;
            border-radius: 6px;
            border: 1px solid rgba(255,255,255,0.1);
            transition: transform 0.3s;
        }
        .gallery-img:hover {
            transform: scale(1.05);
            border-color: #38bdf8;
        }

        .tag-badge { background: rgba(56, 189, 248, 0.1); color: #38bdf8; border: 1px solid rgba(56, 189, 248, 0.3); font-size: 0.75rem; padding: 2px 8px; border-radius: 4px; }
    </style>
</head>
<body>

    <div id="speed-lines"></div>
    <div id="cloud-fog"></div>

    <div id="ui-layer">
        <h1 class="v1-title">FUTURE CAREER</h1>
        <p class="v1-subtitle">CONNECTING TALENTS WITH THE WORLD</p>
    </div>
    <div class="instruction-hint">ç‚¹å‡»åœ°çƒ Â· ç©¿æ¢­æ—¶ç©º</div>

    <div id="canvas-container"></div>

    <div id="map-interface">
        <header class="glass-header fixed top-0 w-full h-16 flex items-center justify-between px-8 z-50">
            <div class="flex items-center gap-3 cursor-pointer" onclick="resetMapToChina()">
                <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-cyan-400 rounded flex items-center justify-center font-bold text-white text-lg">N</div>
                <div class="text-white font-bold text-lg tracking-widest">NEITUI.CO</div>
            </div>
            <div class="relative w-1/3">
                <input type="text" placeholder="æœç´¢èŒä½ã€å…¬å¸ã€åŸå¸‚..." class="search-input w-full py-2 px-5 rounded-full text-center text-sm placeholder-gray-400">
            </div>
            <div class="flex items-center gap-4 text-white text-sm">
                <span class="text-gray-400">å½“å‰åŒºåŸŸ:</span>
                <span id="top-region-name" class="text-cyan-300 font-bold">å…¨å›½</span>
            </div>
        </header>
        <main class="pt-16 w-full h-full relative">
            <div id="breadcrumb-container" class="absolute top-20 left-8 text-gray-400 text-sm z-40 hidden">
                <span class="hover:text-white cursor-pointer transition" onclick="resetMapToChina()">å…¨å›½</span>
                <span class="mx-2 text-gray-600">/</span>
                <span class="text-cyan-400 font-bold">æ±Ÿè‹çœ</span>
            </div>
            <div id="map-chart" style="width: 100%; height: 100%;"></div>
        </main>
    </div>

    <div id="list-interface">
        <header class="glass-header fixed top-0 w-full h-16 flex items-center justify-between px-8 z-50">
            <button onclick="backToMap()" class="flex items-center gap-2 text-gray-400 hover:text-white transition">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                <span>è¿”å›åœ°å›¾</span>
            </button>
            <h2 id="list-city-title" class="text-xl font-bold text-white tracking-wider">CITY NAME</h2>
            <div class="w-20"></div>
        </header>

        <div class="flex h-full pt-16">
            <aside class="w-64 h-full border-r border-white/10 p-6 hidden md:block">
                <div class="mb-8">
                    <h3 class="text-cyan-400 text-xs font-bold uppercase tracking-widest mb-4">ç­›é€‰ Filter</h3>

                    <div class="space-y-4">
                        <div>
                            <label class="text-gray-500 text-xs mb-2 block">æ‰€å±è¡Œä¸š</label>
                            <div class="flex flex-wrap gap-2">
                                <span class="tag-badge cursor-pointer hover:bg-blue-500 hover:text-white transition">äº’è”ç½‘</span>
                                <span class="tag-badge cursor-pointer hover:bg-blue-500 hover:text-white transition">é‡‘è</span>
                                <span class="tag-badge cursor-pointer hover:bg-blue-500 hover:text-white transition">ç¡¬ç§‘æŠ€</span>
                            </div>
                        </div>
                        <div>
                            <label class="text-gray-500 text-xs mb-2 block">ä¼ä¸šè§„æ¨¡</label>
                            <div class="space-y-2 text-gray-400 text-sm">
                                <div class="flex items-center gap-2"><input type="checkbox" class="accent-cyan-400"> <span>ä¸Šå¸‚ä¼ä¸š</span></div>
                                <div class="flex items-center gap-2"><input type="checkbox" class="accent-cyan-400"> <span>ç‹¬è§’å…½</span></div>
                                <div class="flex items-center gap-2"><input type="checkbox" class="accent-cyan-400"> <span>å›½ä¼/å¤®ä¼</span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="p-4 bg-white/5 rounded-lg border border-white/5">
                    <div class="text-gray-400 text-xs mb-1">å½“å‰åŸå¸‚æ”¶å½•</div>
                    <div class="text-2xl font-bold text-white"><span id="company-count">124</span> <span class="text-sm text-gray-500 font-normal">å®¶ä¼ä¸š</span></div>
                    <div class="text-2xl font-bold text-white mt-2"><span id="job-count">892</span> <span class="text-sm text-gray-500 font-normal">ä¸ªå²—ä½</span></div>
                </div>
            </aside>

            <main class="flex-1 h-full overflow-y-auto p-8">
                <div id="cards-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-20">
                </div>
            </main>
        </div>
    </div>

    <!-- ä¼ä¸šè¯¦æƒ…é¡µé¢ -->
    <div id="detail-interface" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 7; display: none; opacity: 0; background: #050b14;">
        <header class="glass-header fixed top-0 w-full h-16 flex items-center justify-between px-8 z-50">
            <button onclick="backToList()" class="flex items-center gap-2 text-cyan-400 hover:text-white transition group">
                <span class="group-hover:-translate-x-1 transition">â†</span>
                <span>è¿”å›ä¼ä¸šåˆ—è¡¨</span>
            </button>
            <div class="w-20"></div>
        </header>

        <div class="flex h-full pt-16 overflow-hidden">
            <!-- å·¦ä¾§ä¿¡æ¯æ  -->
            <aside class="w-1/3 h-full overflow-y-auto border-r border-white/10 p-8 bg-black/20" style="scrollbar-width: thin; scrollbar-color: #38bdf8 rgba(255,255,255,0.05);">
                <div class="flex flex-col items-center mb-8">
                    <h1 id="d-name" class="text-3xl font-bold text-white text-center mb-2"></h1>
                    <div id="d-tags" class="flex flex-wrap gap-2 justify-center"></div>
                </div>

                <div class="space-y-6">
                    <div>
                        <h3 class="text-cyan-500 text-xs font-bold uppercase mb-2">ä¼ä¸šç®€ä»‹ About</h3>
                        <p id="d-intro" class="text-gray-300 text-sm leading-relaxed text-justify"></p>
                    </div>

                    <div class="bg-gradient-to-br from-cyan-900/30 to-transparent border border-cyan-500/20 p-4 rounded-lg">
                        <h3 class="text-cyan-400 text-sm font-bold mb-2 flex items-center">ğŸ”¥ æ¨èç†ç”± Highlight</h3>
                        <p id="d-reason" class="text-gray-400 text-xs leading-relaxed"></p>
                    </div>

                    <div>
                        <h3 class="text-cyan-500 text-xs font-bold uppercase mb-2">åœ°åŒº Location</h3>
                        <p id="d-region" class="text-gray-400 text-sm whitespace-pre-line"></p>
                    </div>

                    <div>
                        <h3 class="text-cyan-500 text-xs font-bold uppercase mb-2">ä¼ä¸šé£é‡‡ Gallery</h3>
                        <div id="d-gallery" class="grid grid-cols-3 gap-2">
                            <!-- åŠ¨æ€å¡«å……å›¾ç‰‡ -->
                        </div>
                    </div>
                </div>
            </aside>

            <!-- å³ä¾§ä¸šåŠ¡æ¿å—å±•ç¤ºåŒº -->
            <main class="flex-1 h-full overflow-y-auto p-8 bg-gradient-to-br from-gray-900 to-black">
                <div class="mb-6 flex items-end gap-4">
                    <h2 class="text-2xl font-bold text-white">ä¸šåŠ¡æ¿å— & å†…æ¨å²—ä½</h2>
                    <span class="text-gray-500 text-sm pb-1">Business Segments & Opportunities</span>
                </div>

                <div id="d-segments" class="grid grid-cols-1 gap-6">
                    <!-- åŠ¨æ€ç”Ÿæˆä¸šåŠ¡æ¿å—å¡ç‰‡ -->
                </div>

                <div class="h-20"></div>
            </main>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.3/echarts.min.js"></script>

    <script>
        /* =========================================
           PART 1: 3D åœºæ™¯æ„å»º (V1 é£æ ¼ + é«˜çº§è½¬åœº)
           ========================================= */
        const container = document.getElementById('canvas-container');
        const uiLayer = document.getElementById('ui-layer');
        const hint = document.querySelector('.instruction-hint');
        const speedLines = document.getElementById('speed-lines');
        const cloudFog = document.getElementById('cloud-fog');

        const scene = new THREE.Scene();
        // ææ·±è“èƒŒæ™¯é›¾ï¼Œèåˆæ˜Ÿç©º
        scene.fog = new THREE.FogExp2(0x020205, 0.015);

        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 2000);
        camera.position.z = 100; // å¼€åœºåŠ¨ç”»ï¼šä»æ·±ç©ºå¼€å§‹

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.outputEncoding = THREE.sRGBEncoding;
        container.appendChild(renderer.domElement);

        const loader = new THREE.TextureLoader();
        const earthGroup = new THREE.Group();
        scene.add(earthGroup);

        // --- A. æ˜Ÿç©º (ä¿æŒä¹‹å‰ä¼˜åŒ–çš„åœ†å½¢å½©è‰²æ˜Ÿæ˜Ÿ) ---
        function createStarTexture() {
            const canvas = document.createElement('canvas');
            canvas.width = 32; canvas.height = 32;
            const ctx = canvas.getContext('2d');
            const grad = ctx.createRadialGradient(16, 16, 0, 16, 16, 16);
            grad.addColorStop(0, 'rgba(255, 255, 255, 1)');
            grad.addColorStop(0.4, 'rgba(255, 255, 255, 0.4)');
            grad.addColorStop(1, 'rgba(255, 255, 255, 0)');
            ctx.fillStyle = grad;
            ctx.fillRect(0, 0, 32, 32);
            return new THREE.Texture(canvas);
        }
        const starTexture = createStarTexture();
        starTexture.needsUpdate = true;

        const starGeo = new THREE.BufferGeometry();
        const starCount = 10000; // å¢åŠ åˆ°10000ä¸ª
        const posArray = []; const colorArray = [];
        // æ‰©å±•é¢œè‰²è°ƒè‰²æ¿ï¼šç™½è‰²ã€è“ç™½è‰²ã€é‡‘é»„è‰²ã€æ·¡ç´«è‰²
        const palette = [
            new THREE.Color(0xffffff), // çº¯ç™½
            new THREE.Color(0xaaddff), // è“ç™½
            new THREE.Color(0xffddaa), // é‡‘é»„
            new THREE.Color(0xddaaff), // æ·¡ç´«
            new THREE.Color(0xffffff), // å¢åŠ ç™½è‰²æƒé‡
            new THREE.Color(0xffffff)  // è®©å¤§éƒ¨åˆ†æ˜Ÿæ˜Ÿä¿æŒçº¯ç™½
        ];
        for(let i=0; i<starCount; i++) {
            posArray.push((Math.random()-0.5)*500, (Math.random()-0.5)*500, (Math.random()-0.5)*250-50);
            const c = palette[Math.floor(Math.random()*palette.length)];
            colorArray.push(c.r, c.g, c.b);
        }
        starGeo.setAttribute('position', new THREE.Float32BufferAttribute(posArray, 3));
        starGeo.setAttribute('color', new THREE.Float32BufferAttribute(colorArray, 3));

        // åˆ›å»ºè‡ªå®šä¹‰ç€è‰²å™¨æè´¨ä»¥æ”¯æŒå½©è‰²æ˜Ÿæ˜Ÿ
        const starMaterial = new THREE.ShaderMaterial({
            uniforms: {
                pointTexture: { value: starTexture }
            },
            vertexShader: `
                attribute vec3 color;
                varying vec3 vColor;
                void main() {
                    vColor = color;
                    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
                    gl_PointSize = 1.4 * (300.0 / -mvPosition.z);
                    gl_Position = projectionMatrix * mvPosition;
                }
            `,
            fragmentShader: `
                uniform sampler2D pointTexture;
                varying vec3 vColor;
                void main() {
                    gl_FragColor = vec4(vColor, 1.0) * texture2D(pointTexture, gl_PointCoord);
                }
            `,
            blending: THREE.AdditiveBlending,
            depthWrite: false,
            transparent: true
        });

        const stars = new THREE.Points(starGeo, starMaterial);
        scene.add(stars);

        // --- B. åœ°çƒ (ä¿æŒæè´¨ä¼˜åŒ–) ---
        const earth = new THREE.Mesh(
            new THREE.SphereGeometry(5, 64, 64),
            new THREE.MeshPhongMaterial({
                map: loader.load('https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/earth_atmos_2048.jpg'),
                specularMap: loader.load('https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/earth_specular_2048.jpg'),
                normalMap: loader.load('https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/earth_normal_2048.jpg'),
                specular: new THREE.Color(0x111111), shininess: 5
            })
        );
        earthGroup.add(earth);

        const clouds = new THREE.Mesh(
            new THREE.SphereGeometry(5.08, 64, 64),
            new THREE.MeshLambertMaterial({
                map: loader.load('https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/earth_clouds_1024.png'),
                transparent: true, opacity: 0.9, blending: THREE.AdditiveBlending
            })
        );
        earthGroup.add(clouds);

        // å¤§æ°”å…‰æ™• (V1 Shader)
        const atmosphere = new THREE.Mesh(
            new THREE.SphereGeometry(5.35, 64, 64),
            new THREE.ShaderMaterial({
                vertexShader: `varying vec3 vNormal; void main() { vNormal = normalize(normalMatrix * normal); gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); }`,
                fragmentShader: `varying vec3 vNormal; void main() { float intensity = pow(0.55 - dot(vNormal, vec3(0, 0, 1.0)), 4.5); gl_FragColor = vec4(0.0, 0.6, 1.0, 1.0) * intensity; }`,
                blending: THREE.AdditiveBlending, side: THREE.BackSide, transparent: true
            })
        );
        scene.add(atmosphere);

        // --- C. ç¯å…‰ ---
        scene.add(new THREE.AmbientLight(0x050510));
        const sunLight = new THREE.DirectionalLight(0xffffff, 1.5);
        sunLight.position.set(30, 10, 30);
        scene.add(sunLight);
        const rimLight = new THREE.SpotLight(0x0088ff, 3);
        rimLight.position.set(-30, 20, -5);
        rimLight.lookAt(0, 0, 0);
        scene.add(rimLight);

        // --- å¼€åœºåŠ¨ç”»ï¼šä»æ·±ç©ºå½’æ¥ ---
        function startIntroSequence() {
            const tl = gsap.timeline({
                onComplete: () => {
                    isIntro = false; // åŠ¨ç”»ç»“æŸï¼Œå…è®¸äº¤äº’
                }
            });

            // A. æ‘„åƒæœºç¼“æ…¢æ¨è¿› (ä» z=100 -> z=16)
            tl.to(camera.position, {
                z: 16,
                duration: 5, // 5ç§’é•¿é•œå¤´
                ease: "power2.out" // ç¼“å‡ºï¼Œæ…¢æ…¢åœä¸‹
            });

            // B. UI æ·¡å…¥ (æ ‡é¢˜å’Œæç¤ºä¾æ¬¡å‡ºç°)
            tl.to('.v1-title', {
                opacity: 1,
                duration: 1.5,
                ease: "power2.out"
            }, "-=1.5"); // æå‰1.5ç§’å¼€å§‹ï¼Œä¸æ‘„åƒæœºè¿åŠ¨é‡å 

            tl.to('.v1-subtitle', {
                opacity: 1,
                duration: 1.2,
                ease: "power2.out"
            }, "-=0.8"); // å­—å¹•ç¨æ™šå‡ºç°

            tl.to('.instruction-hint', {
                opacity: 1,
                duration: 1.0,
                ease: "power2.out"
            }, "-=0.5"); // æç¤ºæœ€åå‡ºç°
        }

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨å¯åŠ¨å¼€åœºåŠ¨ç”»
        window.onload = startIntroSequence;

        // --- D. äº¤äº’ä¸è½¬åœº (æ ¸å¿ƒå‡çº§) ---
        
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();
        let isIntro = true; // å¼€åœºåŠ¨ç”»è¿›è¡Œä¸­
        let isHovering = false, isTransitioning = false;
        let parallaxX = 0, parallaxY = 0;

        window.addEventListener('mousemove', (e) => {
            if(isTransitioning) return;
            mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;

            // åªæœ‰å¼€åœºåŠ¨ç”»ç»“æŸåæ‰æ£€æµ‹æ‚¬åœ
            if (!isIntro) {
                raycaster.setFromCamera(mouse, camera);
                const intersects = raycaster.intersectObjects([earth, clouds]);

                if(intersects.length > 0) {
                    if(!isHovering) {
                        isHovering = true;
                        container.classList.add('interactive');
                        gsap.to(atmosphere.scale, {x:1.03, y:1.03, z:1.03, duration:0.3});
                    }
                } else {
                    if(isHovering) {
                        isHovering = false;
                        container.classList.remove('interactive');
                        gsap.to(atmosphere.scale, {x:1, y:1, z:1, duration:0.3});
                    }
                }
            }

            parallaxX = (e.clientX - window.innerWidth / 2) * 0.001;
            parallaxY = (e.clientY - window.innerHeight / 2) * 0.001;
        });

        window.addEventListener('mousedown', () => {
            if(isIntro || !isHovering || isTransitioning) return; // å¼€åœºåŠ¨ç”»æœŸé—´ç¦ç”¨ç‚¹å‡»
            triggerHyperWarp();
        });

        // === ç»ˆæè½¬åœºé€»è¾‘ ===
        function triggerHyperWarp() {
            isTransitioning = true;
            container.classList.remove('interactive');

            // 0. UI æ¶ˆå¤±
            uiLayer.style.opacity = 0;
            hint.style.opacity = 0;

            const tl = gsap.timeline({ onComplete: switchTo2D });
            // ä¿®æ­£ï¼šä¸­å›½å¤§é™†ä½äºä¸œç»çº¦105åº¦
            // Three.js Yè½´æ—‹è½¬ï¼šæ­£å€¼=é€†æ—¶é’ˆï¼ˆä»ä¸Šå¾€ä¸‹çœ‹ï¼‰
            // è¦å°†ä¸œç»105åº¦æ—‹è½¬åˆ°æ­£é¢ï¼Œéœ€è¦é€†æ—¶é’ˆæ—‹è½¬105åº¦
            // è½¬æ¢ä¸ºå¼§åº¦ï¼š105Â° Ã— (Ï€/180) â‰ˆ 1.83 å¼§åº¦
            const targetRotY = 2.83; // è®©ä¸­å›½æœå‘ç›¸æœº
            const targetRotX = 0.7;  // è½»å¾®å‘ä¸‹å€¾æ–œ

            // 1. åœ°çƒå¯¹é½ + é€Ÿåº¦çº¿å‡ºç°
            tl.to(earthGroup.rotation, { y: targetRotY, x: targetRotX, duration: 1.2, ease: "power2.inOut" }, "start");
            tl.to(speedLines, { opacity: 1, scale: 1.5, duration: 1.0, ease: "power1.in" }, "start");

            // 2. é•œå¤´æ€¥é€Ÿçªè¿› (æ¨¡æ‹Ÿç©¿è¿‡äº‘å±‚)
            tl.to(camera.position, {
                z: 4.5, // å†²å¾—æ›´è¿‘ï¼Œç›´æ¥ç©¿æ¨¡
                x: 0,   // ç¡®ä¿å¯¹å‡†ä¸­å¿ƒ
                y: 0,   // ç¡®ä¿å¯¹å‡†ä¸­å¿ƒ
                duration: 1.5,
                ease: "expo.in",
                onUpdate: () => {
                    // é•œå¤´æŠ–åŠ¨æ•ˆæœ (Camera Shake) - åªåœ¨z<8æ—¶è½»å¾®æŠ–åŠ¨
                    if(camera.position.z < 8 && camera.position.z > 5) {
                        const shakeX = (Math.random() - 0.5) * 0.03;
                        const shakeY = (Math.random() - 0.5) * 0.03;
                        camera.position.x += shakeX;
                        camera.position.y += shakeY;
                    }
                }
            }, "start");

            // 3. æè´¨å˜åŒ–ï¼šå¤§æ°”å±‚å’Œäº‘å±‚è¿…é€Ÿå˜æ·¡ï¼ˆä¸ºäº†ä¸æŒ¡è§†çº¿ï¼‰
            tl.to([clouds.material, atmosphere.material], { opacity: 0, duration: 0.5 }, "-=0.8");

            // 4. â€œäº‘é›¾åå™¬â€ç‰¹æ•ˆ (Backdrop Blur + Brightness)
            tl.to(cloudFog, { 
                opacity: 1, 
                scale: 1.2, // æ‰©æ•£
                backdropFilter: "blur(20px)", // æ¨¡ç³ŠåŠ é‡
                duration: 0.8, 
                ease: "power2.in" 
            }, "-=0.8");
        }

        function animate() {
            requestAnimationFrame(animate);
            if(!isTransitioning) {
                earthGroup.rotation.y += 0.0008;
                clouds.rotation.y += 0.0010;

                // åªæœ‰å¼€åœºåŠ¨ç”»ç»“æŸåæ‰å¯ç”¨è§†å·®æ•ˆæœ
                if (!isIntro) {
                    camera.position.x += (parallaxX * 8 - camera.position.x) * 0.05;
                    camera.position.y += (-parallaxY * 8 - camera.position.y) * 0.05;
                    camera.lookAt(0, 0, 0);
                }
            }
            renderer.render(scene, camera);
        }
        animate();
        
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            if(myChart) myChart.resize();
        });

        /* =========================================
           PART 2: 2D & List Logic
           ========================================= */
        const mapInterface = document.getElementById('map-interface');
        const listInterface = document.getElementById('list-interface');
        const detailInterface = document.getElementById('detail-interface');
        let myChart = null;

        function switchTo2D() {
            // ä½¿ç”¨2.htmlçš„ç®€æ´é€»è¾‘
            container.style.display = 'none';
            speedLines.style.display = 'none';
            mapInterface.style.display = 'block';

            initMap('china');

            setTimeout(() => {
                gsap.to(mapInterface, { opacity: 1, duration: 1 });
                gsap.to(cloudFog, { opacity: 0, duration: 1, onComplete: () => cloudFog.style.display = 'none' });
            }, 100);
        }

        async function initMap(regionName) {
            if (myChart) myChart.dispose();
            myChart = echarts.init(document.getElementById('map-chart'));
            myChart.showLoading({ text: 'æ­£åœ¨åŠ è½½å…¨æ¯æ•°æ®...', color: '#38bdf8', textColor: '#fff', maskColor: 'rgba(0,0,0,0)' });

            const activeProvinces = ['æ±Ÿè‹çœ'];
            const activeCities = ['å—äº¬å¸‚', 'è‹å·å¸‚'];
            let geoJsonUrl = '';
            let isProvince = false;

            if (regionName === 'china') {
                geoJsonUrl = 'https://geo.datav.aliyun.com/areas_v3/bound/100000_full.json';
                document.getElementById('breadcrumb-container').classList.add('hidden');
                document.getElementById('top-region-name').innerText = 'å…¨å›½';
            } else if (regionName === 'jiangsu') {
                geoJsonUrl = 'https://geo.datav.aliyun.com/areas_v3/bound/320000_full.json';
                isProvince = true;
                document.getElementById('breadcrumb-container').classList.remove('hidden');
                document.getElementById('top-region-name').innerText = 'æ±Ÿè‹çœ';
            }

            try {
                const res = await fetch(geoJsonUrl);
                const geoJson = await res.json();
                myChart.hideLoading();
                echarts.registerMap(regionName, geoJson);

                const dataList = geoJson.features.map(feature => {
                    const name = feature.properties.name;
                    const hasData = isProvince ? activeCities.includes(name) : activeProvinces.includes(name);

                    return {
                        name: name,
                        itemStyle: {
                            areaColor: hasData ? 'rgba(56, 189, 248, 0.3)' : 'rgba(11, 16, 38, 0.8)',
                            borderColor: hasData ? '#38bdf8' : '#1e293b',
                            borderWidth: hasData ? 1.5 : 1
                        },
                        emphasis: {
                            itemStyle: { areaColor: hasData ? '#00F0FF' : 'rgba(11, 16, 38, 0.8)' },
                            label: { color: '#fff' }
                        },
                        disabled: !hasData
                    };
                });

                myChart.setOption({
                    geo: {
                        map: regionName, roam: true, zoom: 1.2,
                        label: { show: true, color: '#94a3b8', fontSize: 10 },
                        itemStyle: { areaColor: '#0f172a', borderColor: '#1e293b' },
                        select: { disabled: true }
                    },
                    series: [{ type: 'map', geoIndex: 0, data: dataList }]
                });

                myChart.on('click', params => {
                    if (params.data && params.data.disabled) return;

                    if (!isProvince && params.name === 'æ±Ÿè‹çœ') {
                        initMap('jiangsu');
                    } else if (isProvince && activeCities.includes(params.name)) {
                        showList(params.name);
                    }
                });

            } catch (e) { console.error(e); }
        }
        function resetMapToChina() { initMap('china'); }

        /* =========================================
           PART 3: ä¼ä¸šåˆ—è¡¨é€»è¾‘ (ä½¿ç”¨2.htmlæ¡†æ¶)
           ========================================= */
        const companiesData = [
            // å—äº¬å¸‚ä¼ä¸š
            {
                id: "shein",
                city: "å—äº¬å¸‚",
                shortName: "Shein (å¸ŒéŸ³)",
                name: "Shein (å¸ŒéŸ³)å›½é™…è·¨å¢ƒç”µå•†",
                tags: ["ç‹¬è§’å…½", "è·¨å¢ƒç”µå•†", "å…¨çƒåŒ–"],
                intro: "SHEINæ˜¯å…¨çƒçŸ¥åå¿«æ—¶å°šè·¨å¢ƒç”µå•†å¹³å°ï¼Œæ€»éƒ¨ä½äºå—äº¬ï¼Œä¸šåŠ¡éå¸ƒå…¨çƒ150å¤šä¸ªå›½å®¶å’Œåœ°åŒºã€‚å…¬å¸ä»¥'å¿«é€Ÿå“åº”å¸‚åœº'å’Œ'æŸ”æ€§ä¾›åº”é“¾'ä¸ºæ ¸å¿ƒä¼˜åŠ¿ï¼Œ2023å¹´ä¼°å€¼è¶…è¿‡660äº¿ç¾å…ƒï¼Œæ˜¯ä¸­å›½å‡ºæµ·ä¼ä¸šçš„æ ‡æ†ã€‚",
                reason: "å…¨çƒåŒ–è§†é‡ã€é«˜é€Ÿæˆé•¿ã€æå…·åˆ›æ–°åŠ›çš„ä¾›åº”é“¾æŠ€æœ¯ï¼Œæ˜¯è·¨å¢ƒç”µå•†é¢†åŸŸçš„ç‹¬è§’å…½ä¼ä¸šï¼Œä¸ºå‘˜å·¥æä¾›å›½é™…åŒ–å‘å±•å¹³å°å’Œæå…·ç«äº‰åŠ›çš„è–ªé…¬ã€‚",
                region: "æ€»éƒ¨ï¼šå—äº¬å¸‚\nç ”å‘ä¸­å¿ƒï¼šå¹¿å·ã€æ·±åœ³\næµ·å¤–åŠå…¬å®¤ï¼šæ–°åŠ å¡ã€æ´›æ‰çŸ¶",
                logo: "https://via.placeholder.com/128/0ea5e9/ffffff?text=SHEIN",
                cover: "https://via.placeholder.com/400x200/0ea5e9/ffffff?text=SHEIN+è·¨å¢ƒç”µå•†",
                gallery: [
                    "https://via.placeholder.com/300x200/0ea5e9/ffffff?text=åŠå…¬ç¯å¢ƒ1",
                    "https://via.placeholder.com/300x200/0ea5e9/ffffff?text=å›¢é˜Ÿæ´»åŠ¨2",
                    "https://via.placeholder.com/300x200/0ea5e9/ffffff?text=ä¼ä¸šæ–‡åŒ–3"
                ],
                segments: [
                    {
                        name: "æŠ€æœ¯ç ”å‘ä¸­å¿ƒ",
                        jobs: ["Javaåç«¯å¼€å‘", "Pythonæ•°æ®å·¥ç¨‹å¸ˆ", "å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ", "ç®—æ³•å·¥ç¨‹å¸ˆ", "å¤§æ•°æ®å¼€å‘"]
                    },
                    {
                        name: "ä¾›åº”é“¾ç®¡ç†",
                        jobs: ["ä¾›åº”é“¾ç®¡åŸ¹ç”Ÿ", "é‡‡è´­ä¸“å‘˜", "ç‰©æµä¼˜åŒ–å·¥ç¨‹å¸ˆ", "ä»“å‚¨ç®¡ç†"]
                    },
                    {
                        name: "æ•°æ®åˆ†æéƒ¨",
                        jobs: ["æ•°æ®åˆ†æå¸ˆ", "å•†ä¸šæ™ºèƒ½åˆ†æ", "ç”¨æˆ·å¢é•¿åˆ†æ"]
                    }
                ]
            },
            {
                id: "suning",
                city: "å—äº¬å¸‚",
                shortName: "è‹å®æ˜“è´­",
                name: "è‹å®æ˜“è´­é›†å›¢è‚¡ä»½æœ‰é™å…¬å¸",
                tags: ["ä¸Šå¸‚ä¼ä¸š", "ç”µå•†", "é›¶å”®"],
                intro: "è‹å®æ˜“è´­æ˜¯ä¸­å›½é¢†å…ˆçš„æ™ºæ…§é›¶å”®æœåŠ¡å•†ï¼Œæ‹¥æœ‰çº¿ä¸Šçº¿ä¸‹åŒçº¿èåˆçš„å…¨åœºæ™¯é›¶å”®æ¨¡å¼ã€‚å…¬å¸ä¸šåŠ¡æ¶µç›–å®¶ç”µã€3Cã€è¶…å¸‚ã€æ¯å©´ç­‰å¤šä¸ªå“ç±»ï¼Œè‡´åŠ›äºä¸ºæ¶ˆè´¹è€…æä¾›ä¼˜è´¨çš„è´­ç‰©ä½“éªŒã€‚",
                reason: "å›½å†…çŸ¥åä¸Šå¸‚ä¼ä¸šï¼Œæ‹¥æœ‰å®Œå–„çš„åŸ¹è®­ä½“ç³»å’Œæ™‹å‡é€šé“ï¼Œé€‚åˆåº”å±Šç”Ÿå¿«é€Ÿæˆé•¿ã€‚",
                region: "æ€»éƒ¨ï¼šå—äº¬å¸‚\nå…¨å›½é—¨åº—ï¼šè¶…è¿‡6000å®¶",
                logo: "https://via.placeholder.com/128/fbbf24/ffffff?text=è‹å®",
                cover: "https://via.placeholder.com/400x200/fbbf24/ffffff?text=è‹å®æ˜“è´­",
                gallery: [
                    "https://via.placeholder.com/300x200/fbbf24/ffffff?text=è‹å®æ€»éƒ¨",
                    "https://via.placeholder.com/300x200/fbbf24/ffffff?text=æ™ºæ…§é—¨åº—",
                    "https://via.placeholder.com/300x200/fbbf24/ffffff?text=ç‰©æµä¸­å¿ƒ"
                ],
                segments: [
                    {
                        name: "ç”µå•†æŠ€æœ¯éƒ¨",
                        jobs: ["å‰ç«¯å·¥ç¨‹å¸ˆ", "äº§å“ç»ç†", "UIè®¾è®¡å¸ˆ", "æµ‹è¯•å·¥ç¨‹å¸ˆ"]
                    },
                    {
                        name: "è¿è¥ä¸­å¿ƒ",
                        jobs: ["è¿è¥ä¸“å‘˜", "æ´»åŠ¨ç­–åˆ’", "å†…å®¹è¿è¥", "ç”¨æˆ·è¿è¥"]
                    }
                ]
            },
            {
                id: "focus_tech",
                city: "å—äº¬å¸‚",
                shortName: "ç„¦ç‚¹ç§‘æŠ€",
                name: "ç„¦ç‚¹ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸",
                tags: ["ä¸Šå¸‚ä¼ä¸š", "äº’è”ç½‘", "B2B"],
                intro: "ç„¦ç‚¹ç§‘æŠ€æ˜¯ä¸­å›½é¢†å…ˆçš„B2Bç”µå­å•†åŠ¡å¹³å°è¿è¥å•†ï¼Œæ——ä¸‹æ‹¥æœ‰ä¸­å›½åˆ¶é€ ç½‘ç­‰çŸ¥åå¹³å°ï¼Œä¸ºå…¨çƒä¹°å®¶å’Œä¸­å›½ä¾›åº”å•†æä¾›è´¸æ˜“æ’®åˆæœåŠ¡ã€‚",
                reason: "æ·±è€•B2Bé¢†åŸŸå¤šå¹´ï¼ŒæŠ€æœ¯æ°›å›´æµ“åšï¼Œé‡è§†å‘˜å·¥æŠ€æœ¯æˆé•¿ã€‚",
                region: "æ€»éƒ¨ï¼šå—äº¬å¸‚\næµ·å¤–åŠå…¬å®¤ï¼šç¾å›½ã€æ¬§æ´²",
                logo: "https://via.placeholder.com/128/10b981/ffffff?text=ç„¦ç‚¹",
                cover: "https://via.placeholder.com/400x200/10b981/ffffff?text=ç„¦ç‚¹ç§‘æŠ€",
                gallery: [
                    "https://via.placeholder.com/300x200/10b981/ffffff?text=åŠå…¬åŒº",
                    "https://via.placeholder.com/300x200/10b981/ffffff?text=ä¼šè®®å®¤",
                    "https://via.placeholder.com/300x200/10b981/ffffff?text=ä¼‘é—²åŒº"
                ],
                segments: [
                    {
                        name: "å¹³å°ç ”å‘éƒ¨",
                        jobs: ["Goè¯­è¨€å¼€å‘", "å¾®æœåŠ¡æ¶æ„å¸ˆ", "æµ‹è¯•å·¥ç¨‹å¸ˆ", "è¿ç»´å·¥ç¨‹å¸ˆ"]
                    },
                    {
                        name: "äº§å“è®¾è®¡éƒ¨",
                        jobs: ["äº§å“ç»ç†", "äº¤äº’è®¾è®¡å¸ˆ", "è§†è§‰è®¾è®¡å¸ˆ"]
                    }
                ]
            },
            {
                id: "manbang",
                city: "å—äº¬å¸‚",
                shortName: "æ»¡å¸®é›†å›¢",
                name: "æ»¡å¸®é›†å›¢æœ‰é™å…¬å¸",
                tags: ["ç‹¬è§’å…½", "æ™ºæ…§ç‰©æµ", "äº’è”ç½‘+"],
                intro: "æ»¡å¸®é›†å›¢æ˜¯ä¸­å›½é¢†å…ˆçš„å…¬è·¯ç‰©æµäº’è”ç½‘ä¿¡æ¯å¹³å°ï¼Œæ——ä¸‹æ‹¥æœ‰è¿æ»¡æ»¡å’Œè´§è½¦å¸®ä¸¤å¤§å“ç‰Œï¼Œè¿æ¥è¶…è¿‡1000ä¸‡è´§è½¦å¸æœºå’Œè´§ä¸»ï¼Œæ˜¯ç‰©æµç§‘æŠ€é¢†åŸŸçš„ç‹¬è§’å…½ä¼ä¸šã€‚",
                reason: "ç‰©æµç§‘æŠ€ç‹¬è§’å…½ï¼ŒæŠ€æœ¯é©±åŠ¨å‹å…¬å¸ï¼Œä¸ºå‘˜å·¥æä¾›ä¸°å¯Œçš„æŠ€æœ¯æŒ‘æˆ˜å’Œæˆé•¿æœºä¼šã€‚",
                region: "æ€»éƒ¨ï¼šå—äº¬å¸‚\nç ”å‘ä¸­å¿ƒï¼šè´µé˜³ã€æˆéƒ½",
                logo: "https://via.placeholder.com/128/f59e0b/ffffff?text=æ»¡å¸®",
                cover: "https://via.placeholder.com/400x200/f59e0b/ffffff?text=æ»¡å¸®é›†å›¢",
                gallery: [
                    "https://via.placeholder.com/300x200/f59e0b/ffffff?text=æ™ºæ…§ç‰©æµ",
                    "https://via.placeholder.com/300x200/f59e0b/ffffff?text=æŠ€æœ¯å›¢é˜Ÿ",
                    "https://via.placeholder.com/300x200/f59e0b/ffffff?text=åˆ›æ–°å®éªŒå®¤"
                ],
                segments: [
                    {
                        name: "AIç®—æ³•éƒ¨",
                        jobs: ["ç®—æ³•å·¥ç¨‹å¸ˆ", "æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆ", "NLPå·¥ç¨‹å¸ˆ", "æ¨èç³»ç»Ÿå·¥ç¨‹å¸ˆ"]
                    },
                    {
                        name: "å¤§æ•°æ®éƒ¨",
                        jobs: ["å¤§æ•°æ®å¼€å‘", "æ•°æ®ä»“åº“å·¥ç¨‹å¸ˆ", "å®æ—¶è®¡ç®—å·¥ç¨‹å¸ˆ"]
                    }
                ]
            },
            {
                id: "bytedance_nanjing",
                city: "å—äº¬å¸‚",
                shortName: "å­—èŠ‚è·³åŠ¨(å—äº¬)",
                name: "å­—èŠ‚è·³åŠ¨ç§‘æŠ€æœ‰é™å…¬å¸ å—äº¬ç ”å‘ä¸­å¿ƒ",
                tags: ["å¤§å‚", "äº’è”ç½‘", "åˆ†å…¬å¸"],
                intro: "å­—èŠ‚è·³åŠ¨æ˜¯å…¨çƒé¢†å…ˆçš„å†…å®¹ç§‘æŠ€å…¬å¸ï¼Œæ——ä¸‹æ‹¥æœ‰æŠ–éŸ³ã€ä»Šæ—¥å¤´æ¡ã€è¥¿ç“œè§†é¢‘ç­‰çŸ¥åäº§å“ã€‚å—äº¬ç ”å‘ä¸­å¿ƒæ‰¿æ‹…é‡è¦çš„æŠ€æœ¯ç ”å‘å’Œäº§å“åˆ›æ–°ä»»åŠ¡ã€‚",
                reason: "å¤§å‚èƒŒæ™¯ï¼ŒæŠ€æœ¯æ°›å›´ä¸€æµï¼Œè–ªèµ„å¾…é‡é¡¶å°–ï¼Œé¡¹ç›®æœ‰æŒ‘æˆ˜æ€§ã€‚",
                region: "å—äº¬ç ”å‘ä¸­å¿ƒï¼šå—äº¬å¸‚",
                logo: "https://via.placeholder.com/128/ef4444/ffffff?text=å­—èŠ‚",
                cover: "https://via.placeholder.com/400x200/ef4444/ffffff?text=å­—èŠ‚è·³åŠ¨",
                gallery: [
                    "https://via.placeholder.com/300x200/ef4444/ffffff?text=åŠå…¬ç¯å¢ƒ",
                    "https://via.placeholder.com/300x200/ef4444/ffffff?text=æŠ€æœ¯åˆ†äº«",
                    "https://via.placeholder.com/300x200/ef4444/ffffff?text=å›¢é˜Ÿå»ºè®¾"
                ],
                segments: [
                    {
                        name: "å®¢æˆ·ç«¯ç ”å‘",
                        jobs: ["iOSå¼€å‘", "Androidå¼€å‘", "Flutterå¼€å‘", "å®¢æˆ·ç«¯æ¶æ„å¸ˆ"]
                    },
                    {
                        name: "å…¨æ ˆç ”å‘",
                        jobs: ["å…¨æ ˆå·¥ç¨‹å¸ˆ", "Node.jså¼€å‘", "Reactå¼€å‘", "Vueå¼€å‘"]
                    }
                ]
            },
            {
                id: "huawei_nanjing",
                city: "å—äº¬å¸‚",
                shortName: "åä¸º(å—äº¬ç ”)",
                name: "åä¸ºæŠ€æœ¯æœ‰é™å…¬å¸ å—äº¬ç ”ç©¶æ‰€",
                tags: ["ICT", "é€šä¿¡", "ä¸–ç•Œ500å¼º"],
                intro: "åä¸ºæ˜¯å…¨çƒé¢†å…ˆçš„ICTåŸºç¡€è®¾æ–½å’Œæ™ºèƒ½ç»ˆç«¯æä¾›å•†ï¼Œå—äº¬ç ”ç©¶æ‰€ä¸“æ³¨äº5Gã€äº‘è®¡ç®—ã€äººå·¥æ™ºèƒ½ç­‰å‰æ²¿æŠ€æœ¯ç ”å‘ã€‚",
                reason: "ä¸–ç•Œ500å¼ºä¼ä¸šï¼ŒæŠ€æœ¯å®åŠ›é›„åšï¼Œæä¾›å®Œå–„çš„åŸ¹è®­ä½“ç³»å’ŒèŒä¸šå‘å±•è·¯å¾„ã€‚",
                region: "å—äº¬ç ”ç©¶æ‰€ï¼šå—äº¬å¸‚\nå…¨çƒç ”å‘ä¸­å¿ƒï¼šæ·±åœ³ã€ä¸Šæµ·ã€åŒ—äº¬ç­‰",
                logo: "https://via.placeholder.com/128/dc2626/ffffff?text=åä¸º",
                cover: "https://via.placeholder.com/400x200/dc2626/ffffff?text=åä¸ºå—äº¬",
                gallery: [
                    "https://via.placeholder.com/300x200/dc2626/ffffff?text=ç ”å‘ä¸­å¿ƒ",
                    "https://via.placeholder.com/300x200/dc2626/ffffff?text=å®éªŒå®¤",
                    "https://via.placeholder.com/300x200/dc2626/ffffff?text=å‘˜å·¥æ´»åŠ¨"
                ],
                segments: [
                    {
                        name: "æ— çº¿é€šä¿¡ç ”ç©¶éƒ¨",
                        jobs: ["åµŒå…¥å¼å¼€å‘", "5Gç½‘ç»œä¼˜åŒ–", "å°„é¢‘å·¥ç¨‹å¸ˆ", "é€šä¿¡ç®—æ³•å·¥ç¨‹å¸ˆ"]
                    },
                    {
                        name: "äº‘è®¡ç®—éƒ¨",
                        jobs: ["äº‘å¹³å°å¼€å‘", "è™šæ‹ŸåŒ–å·¥ç¨‹å¸ˆ", "å®¹å™¨æŠ€æœ¯ä¸“å®¶"]
                    }
                ]
            },
            // è‹å·å¸‚ä¼ä¸š
            {
                id: "microsoft_suzhou",
                city: "è‹å·å¸‚",
                shortName: "å¾®è½¯(è‹å·)",
                name: "å¾®è½¯(ä¸­å›½)æœ‰é™å…¬å¸ è‹å·åˆ†å…¬å¸",
                tags: ["å¤–ä¼", "äº‘è®¡ç®—", "AI"],
                intro: "å¾®è½¯æ˜¯å…¨çƒé¢†å…ˆçš„ç§‘æŠ€å…¬å¸ï¼Œè‹å·åˆ†å…¬å¸ä¸“æ³¨äºAzureäº‘æœåŠ¡ã€äººå·¥æ™ºèƒ½å’Œä¼ä¸šè§£å†³æ–¹æ¡ˆçš„ç ”å‘ä¸æŠ€æœ¯æ”¯æŒã€‚",
                reason: "å…¨çƒé¡¶çº§ç§‘æŠ€å…¬å¸ï¼Œå›½é™…åŒ–å·¥ä½œç¯å¢ƒï¼ŒæŠ€æœ¯å‰æ²¿ï¼Œè–ªèµ„ç¦åˆ©ä¸šç•Œé¢†å…ˆã€‚",
                region: "è‹å·åˆ†å…¬å¸ï¼šè‹å·å·¥ä¸šå›­åŒº",
                logo: "https://via.placeholder.com/128/06b6d4/ffffff?text=Microsoft",
                cover: "https://via.placeholder.com/400x200/06b6d4/ffffff?text=å¾®è½¯è‹å·",
                gallery: [
                    "https://via.placeholder.com/300x200/06b6d4/ffffff?text=è‹å·å›­åŒº",
                    "https://via.placeholder.com/300x200/06b6d4/ffffff?text=ç ”å‘å›¢é˜Ÿ",
                    "https://via.placeholder.com/300x200/06b6d4/ffffff?text=æŠ€æœ¯äº¤æµ"
                ],
                segments: [
                    {
                        name: "Azureäº‘æœåŠ¡",
                        jobs: ["Software Engineer", "Cloud Architect", "DevOps Engineer", "Site Reliability Engineer"]
                    },
                    {
                        name: "äº§å“ç®¡ç†éƒ¨",
                        jobs: ["Product Manager", "Program Manager", "Technical Project Manager"]
                    }
                ]
            },
            {
                id: "ecovacs",
                city: "è‹å·å¸‚",
                shortName: "ç§‘æ²ƒæ–¯æœºå™¨äºº",
                name: "ç§‘æ²ƒæ–¯æœºå™¨äººè‚¡ä»½æœ‰é™å…¬å¸",
                tags: ["ä¸Šå¸‚", "æ™ºèƒ½ç¡¬ä»¶", "æœºå™¨äºº"],
                intro: "ç§‘æ²ƒæ–¯æ˜¯å…¨çƒé¢†å…ˆçš„æœåŠ¡æœºå™¨äººæä¾›å•†ï¼Œä¸“æ³¨äºå®¶åº­æœåŠ¡æœºå™¨äººçš„ç ”å‘ã€åˆ¶é€ å’Œé”€å”®ï¼Œæ——ä¸‹äº§å“åŒ…æ‹¬æ‰«åœ°æœºå™¨äººã€æ“¦çª—æœºå™¨äººç­‰ã€‚",
                reason: "å›½å†…æ™ºèƒ½ç¡¬ä»¶é¢†å†›ä¼ä¸šï¼ŒæŠ€æœ¯ç ”å‘å®åŠ›å¼ºï¼Œæä¾›ä»ç®—æ³•åˆ°ç¡¬ä»¶çš„å…¨æ ˆå¼€å‘æœºä¼šã€‚",
                region: "æ€»éƒ¨ï¼šè‹å·å¸‚\nç”Ÿäº§åŸºåœ°ï¼šè‹å·ã€åˆè‚¥",
                logo: "https://via.placeholder.com/128/8b5cf6/ffffff?text=ç§‘æ²ƒæ–¯",
                cover: "https://via.placeholder.com/400x200/8b5cf6/ffffff?text=ç§‘æ²ƒæ–¯æœºå™¨äºº",
                gallery: [
                    "https://via.placeholder.com/300x200/8b5cf6/ffffff?text=ç ”å‘å®éªŒå®¤",
                    "https://via.placeholder.com/300x200/8b5cf6/ffffff?text=ç”Ÿäº§çº¿",
                    "https://via.placeholder.com/300x200/8b5cf6/ffffff?text=äº§å“å±•ç¤º"
                ],
                segments: [
                    {
                        name: "AIç®—æ³•éƒ¨",
                        jobs: ["SLAMç®—æ³•å·¥ç¨‹å¸ˆ", "è·¯å¾„è§„åˆ’ç®—æ³•", "è®¡ç®—æœºè§†è§‰å·¥ç¨‹å¸ˆ", "æ·±åº¦å­¦ä¹ å·¥ç¨‹å¸ˆ"]
                    },
                    {
                        name: "ç¡¬ä»¶ç ”å‘éƒ¨",
                        jobs: ["æœºæ¢°è®¾è®¡å·¥ç¨‹å¸ˆ", "ç”µå­ç¡¬ä»¶å·¥ç¨‹å¸ˆ", "åµŒå…¥å¼å¼€å‘"]
                    }
                ]
            },
            {
                id: "tongcheng",
                city: "è‹å·å¸‚",
                shortName: "åŒç¨‹æ—…è¡Œ",
                name: "åŒç¨‹ç½‘ç»œç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸",
                tags: ["ä¸Šå¸‚", "OTA", "åœ¨çº¿æ—…æ¸¸"],
                intro: "åŒç¨‹æ—…è¡Œæ˜¯ä¸­å›½é¢†å…ˆçš„åœ¨çº¿æ—…æ¸¸å¹³å°ï¼Œæä¾›æœºç¥¨ã€é…’åº—ã€ç«è½¦ç¥¨ã€æ™¯ç‚¹é—¨ç¥¨ç­‰ä¸€ç«™å¼æ—…æ¸¸æœåŠ¡ï¼Œæœˆæ´»ç”¨æˆ·è¶…è¿‡2äº¿ã€‚",
                reason: "å›½å†…çŸ¥åOTAå¹³å°ï¼Œä¸šåŠ¡å¢é•¿è¿…é€Ÿï¼ŒæŠ€æœ¯æ°›å›´å¥½ï¼Œé‡è§†ç”¨æˆ·ä½“éªŒå’Œæ•°æ®é©±åŠ¨ã€‚",
                region: "æ€»éƒ¨ï¼šè‹å·å¸‚\nåˆ†å…¬å¸ï¼šä¸Šæµ·ã€åŒ—äº¬",
                logo: "https://via.placeholder.com/128/22c55e/ffffff?text=åŒç¨‹",
                cover: "https://via.placeholder.com/400x200/22c55e/ffffff?text=åŒç¨‹æ—…è¡Œ",
                gallery: [
                    "https://via.placeholder.com/300x200/22c55e/ffffff?text=åŠå…¬å¤§æ¥¼",
                    "https://via.placeholder.com/300x200/22c55e/ffffff?text=æŠ€æœ¯å›¢é˜Ÿ",
                    "https://via.placeholder.com/300x200/22c55e/ffffff?text=å‘˜å·¥ç¦åˆ©"
                ],
                segments: [
                    {
                        name: "æŠ€æœ¯ç ”å‘ä¸­å¿ƒ",
                        jobs: ["Javaå¼€å‘", "å‰ç«¯å¼€å‘", "ç§»åŠ¨ç«¯å¼€å‘", "æµ‹è¯•å·¥ç¨‹å¸ˆ"]
                    },
                    {
                        name: "å¢é•¿ä¸è¿è¥",
                        jobs: ["ç”¨æˆ·å¢é•¿ä¸“å®¶", "æ•°æ®åˆ†æå¸ˆ", "è¿è¥ç»ç†", "å¸‚åœºæ¨å¹¿"]
                    }
                ]
            },
            {
                id: "qichacha",
                city: "è‹å·å¸‚",
                shortName: "ä¼æŸ¥æŸ¥",
                name: "è‹å·æœ—åŠ¨ç½‘ç»œç§‘æŠ€æœ‰é™å…¬å¸(ä¼æŸ¥æŸ¥)",
                tags: ["å¤§æ•°æ®", "ä¼ä¸šæœåŠ¡", "äº’è”ç½‘"],
                intro: "ä¼æŸ¥æŸ¥æ˜¯ä¸­å›½é¢†å…ˆçš„ä¼ä¸šä¿¡ç”¨æŸ¥è¯¢å¹³å°ï¼Œé€šè¿‡å¤§æ•°æ®å’Œäººå·¥æ™ºèƒ½æŠ€æœ¯ï¼Œä¸ºç”¨æˆ·æä¾›ä¼ä¸šå·¥å•†ä¿¡æ¯ã€å¸æ³•é£é™©ã€ç»è¥çŠ¶å†µç­‰å…¨æ–¹ä½çš„ä¼ä¸šä¿¡æ¯æŸ¥è¯¢æœåŠ¡ã€‚",
                reason: "å¤§æ•°æ®é¢†åŸŸå¤´éƒ¨ä¼ä¸šï¼ŒæŠ€æœ¯é©±åŠ¨ï¼Œæ•°æ®è§„æ¨¡å¤§ï¼Œé€‚åˆå–œæ¬¢æ•°æ®æŒ–æ˜å’Œçˆ¬è™«æŠ€æœ¯çš„å·¥ç¨‹å¸ˆã€‚",
                region: "æ€»éƒ¨ï¼šè‹å·å¸‚\nç ”å‘ä¸­å¿ƒï¼šåŒ—äº¬ã€ä¸Šæµ·",
                logo: "https://via.placeholder.com/128/f97316/ffffff?text=ä¼æŸ¥æŸ¥",
                cover: "https://via.placeholder.com/400x200/f97316/ffffff?text=ä¼æŸ¥æŸ¥",
                gallery: [
                    "https://via.placeholder.com/300x200/f97316/ffffff?text=æ•°æ®ä¸­å¿ƒ",
                    "https://via.placeholder.com/300x200/f97316/ffffff?text=ç ”å‘å›¢é˜Ÿ",
                    "https://via.placeholder.com/300x200/f97316/ffffff?text=åŠå…¬ç¯å¢ƒ"
                ],
                segments: [
                    {
                        name: "æ•°æ®å·¥ç¨‹éƒ¨",
                        jobs: ["çˆ¬è™«å·¥ç¨‹å¸ˆ", "æ•°æ®æŒ–æ˜å·¥ç¨‹å¸ˆ", "ETLå¼€å‘", "æ•°æ®è´¨é‡å·¥ç¨‹å¸ˆ"]
                    },
                    {
                        name: "å¹³å°ç ”å‘éƒ¨",
                        jobs: ["åç«¯å¼€å‘", "æœç´¢å¼•æ“å·¥ç¨‹å¸ˆ", "æ¨èç³»ç»Ÿå·¥ç¨‹å¸ˆ"]
                    }
                ]
            }
        ];

        function showList(cityName) {
            // 1. åˆ‡æ¢ç•Œé¢
            gsap.to(mapInterface, { opacity: 0, duration: 0.5, onComplete: () => {
                mapInterface.style.display = 'none';
                listInterface.style.display = 'block';
                gsap.to(listInterface, { opacity: 1, duration: 0.5 });
            }});

            // 2. è®¾ç½®æ ‡é¢˜
            document.getElementById('list-city-title').innerText = cityName + " Â· ä¼ä¸šåå½•";

            // 3. è¿‡æ»¤è¯¥åŸå¸‚çš„ä¼ä¸šæ•°æ®
            const cityCompanies = companiesData.filter(c => c.city === cityName);

            // æ›´æ–°å·¦ä¾§ç»Ÿè®¡
            document.getElementById('company-count').innerText = cityCompanies.length;
            document.getElementById('job-count').innerText = cityCompanies.reduce((sum, c) => sum + c.segments.reduce((s, seg) => s + seg.jobs.length, 0), 0);

            const cardsContainer = document.getElementById('cards-container');
            cardsContainer.innerHTML = ''; // æ¸…ç©ºæ—§æ•°æ®

            // 4. æ¸²æŸ“ä¼ä¸šå¡ç‰‡
            cityCompanies.forEach((company) => {
                const card = document.createElement('div');
                card.className = 'company-card rounded-xl overflow-hidden cursor-pointer opacity-0 translate-y-10';
                card.onclick = () => showDetail(company); // ç‚¹å‡»è·³è½¬è¯¦æƒ…

                let tagsHtml = company.tags.map(t => `<span class="tag-badge">${t}</span>`).join(' ');
                let jobsPreview = company.segments[0].jobs.slice(0, 3).join(' / ');

                card.innerHTML = `
                    <div class="h-40 w-full overflow-hidden relative">
                        <img src="${company.cover}" class="w-full h-full object-cover" alt="${company.shortName}">
                        <div class="absolute bottom-0 left-0 w-full h-1/2 bg-gradient-to-t from-gray-900 to-transparent"></div>
                    </div>
                    <div class="p-5 text-white">
                        <h3 class="font-bold text-lg mb-2">${company.shortName}</h3>
                        <div class="flex flex-wrap gap-2 mb-3">${tagsHtml}</div>
                        <p class="text-xs text-gray-400 line-clamp-2 mb-3">${company.intro}</p>
                        <div class="pt-3 border-t border-white/10 flex justify-between items-center">
                            <span class="text-xs text-gray-500">çƒ­æ‹›: ${jobsPreview}...</span>
                            <span class="text-cyan-400 text-xs font-bold">è¯¦æƒ… â†’</span>
                        </div>
                    </div>
                `;
                cardsContainer.appendChild(card);
            });

            // 5. å¡ç‰‡è¿›åœºåŠ¨ç”»
            gsap.to('.company-card', {
                opacity: 1,
                y: 0,
                duration: 0.6,
                stagger: 0.1,
                delay: 0.3,
                ease: "power2.out"
            });
        }

        // æ˜¾ç¤ºä¼ä¸šè¯¦æƒ…é¡µ
        function showDetail(company) {
            // 1. åˆ‡æ¢ç•Œé¢
            gsap.to(listInterface, { opacity: 0, duration: 0.4, onComplete: () => {
                listInterface.style.display = 'none';
                detailInterface.style.display = 'block';
                gsap.to(detailInterface, { opacity: 1, duration: 0.4 });
            }});

            // 2. å¡«å……å·¦ä¾§åŸºæœ¬ä¿¡æ¯
            document.getElementById('d-name').innerText = company.name;
            document.getElementById('d-tags').innerHTML = company.tags.map(t => `<span class="tag-badge">${t}</span>`).join(' ');
            document.getElementById('d-intro').innerText = company.intro;
            document.getElementById('d-reason').innerText = company.reason;
            document.getElementById('d-region').innerText = company.region;

            // 3. å¡«å……ç›¸å†Œ
            const galContainer = document.getElementById('d-gallery');
            galContainer.innerHTML = '';
            if (company.gallery && company.gallery.length > 0) {
                company.gallery.forEach(imgUrl => {
                    const img = document.createElement('img');
                    img.src = imgUrl;
                    img.className = 'gallery-img cursor-pointer';
                    img.alt = company.shortName + ' ç›¸å†Œ';
                    galContainer.appendChild(img);
                });
            } else {
                galContainer.innerHTML = '<div class="col-span-3 text-gray-500 text-sm text-center py-4">æš‚æ— å›¾ç‰‡</div>';
            }

            // 4. å¡«å……ä¸šåŠ¡æ¿å—
            const segContainer = document.getElementById('d-segments');
            segContainer.innerHTML = '';
            company.segments.forEach(seg => {
                const segDiv = document.createElement('div');
                segDiv.className = 'segment-card opacity-0 translate-y-4';

                let jobsHtml = seg.jobs.map(j => `<span class="job-tag">${j}</span>`).join('');

                segDiv.innerHTML = `
                    <div class="segment-title">${seg.name}</div>
                    <div class="flex flex-wrap">${jobsHtml}</div>
                `;
                segContainer.appendChild(segDiv);
            });

            // 5. è¿›åœºåŠ¨ç”»
            gsap.to('.segment-card', {
                opacity: 1,
                y: 0,
                duration: 0.5,
                stagger: 0.05,
                delay: 0.2,
                ease: "power2.out"
            });
        }

        // ä»è¯¦æƒ…é¡µè¿”å›åˆ—è¡¨é¡µ
        function backToList() {
            gsap.to(detailInterface, { opacity: 0, duration: 0.4, onComplete: () => {
                detailInterface.style.display = 'none';
                listInterface.style.display = 'block';
                gsap.to(listInterface, { opacity: 1, duration: 0.4 });
            }});
        }

        function backToMap() {
            gsap.to(listInterface, { opacity: 0, duration: 0.4, onComplete: () => {
                listInterface.style.display = 'none';
                mapInterface.style.display = 'block';
                gsap.to(mapInterface, { opacity: 1, duration: 0.4 });
                if(myChart) myChart.resize();
            }});
        }
    </script>
</body>
</html>